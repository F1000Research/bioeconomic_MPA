<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Bioeconomic MPA network design - R toolkit : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Bioeconomic MPA network design - R toolkit</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/remi-daigle/bioeconomic_MPA">View on GitHub</a>

          <h1 id="project_title">Bioeconomic MPA network design - R toolkit</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/remi-daigle/bioeconomic_MPA/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/remi-daigle/bioeconomic_MPA/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="bioeconomic-mpa-network-design---r-toolkit" class="anchor" href="#bioeconomic-mpa-network-design---r-toolkit" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bioeconomic MPA network design - R toolkit</h1>

<p>Thank you for your interest in the R toolkit for the bioeconomic evaluation of MPA network design! If you haven't already done so, please refer to the manuscript describing the model results (insert link to manuscript once published).</p>

<h2>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h2>

<p>If you would like to apply this toolkit to your own scenario, please fork this repository and modify as needed. We kindly ask that you cite both the original manuscript and this repository in any resulting publication. We recognize that there are some aspects of the model the could be closer to reality and we look forward to seeing how you would improve it. To make changes, we recommend starting with user_input.R, functions.R, or changing one or more of the sub-modules.</p>

<p>If you would like to replicate our results, download the repository as is and run the simulations by running the code in master.R. This script will source the user defined parameters (user_input.R), the custom MPA toolkit functions (functions.R), and the various MPA toolkit sub-modules.</p>

<p><strong>Please note:</strong> This toolkit requires the installation of R packages before use (dplyr, Grid2Polygons, maptools, raster, readr, rgdal*, rgeos, sp)</p>

<blockquote>
<p>*installation of the rgdal package is notoriously difficult, please see <a href="http://stackoverflow.com/questions/15248815/rgdal-package-installation">here</a> and <a href="http://cran.r-project.org/web/packages/rgdal/index.html">here</a> for further information should you have any problems.</p>
</blockquote>

<h2>
<a id="parameterization" class="anchor" href="#parameterization" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameterization</h2>

<p>Such a complex model requires many parameters to function properly. Below we have included a list of parameters and user inputs contained in the model.</p>

<table>
<thead>
<tr>
<th align="center">Variable</th>
<th align="center">Value</th>
<th align="center">Definition</th>
<th align="center">Source</th>
</tr>
</thead>
<tbody>
<tr>
<td align="center"><em>time</em></td>
<td align="center">2001:2051</td>
<td align="center">The time over which the model is run (e.g. 2001 to 2100)</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>spinup</em></td>
<td align="center">10</td>
<td align="center">The number of years the model runs to generate a realistic starting population before "time". Results are not saved during spin-up time</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>tot_time</em></td>
<td align="center">1991:2051</td>
<td align="center">The time over which the model is run including spin-up time</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>dt</em></td>
<td align="center">1</td>
<td align="center">The time step in years</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>replicates</em></td>
<td align="center">1:10</td>
<td align="center">The number of replicates for the main body of the model</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>cell_size</em></td>
<td align="center">20</td>
<td align="center">The height and width of the model cell size in km</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>proj</em></td>
<td align="center">"+proj=lcc ... +units=m +no_defs"</td>
<td align="center">The map projection to be used, must comply with <a href="http://www.inside-r.org/packages/cran/sp/docs/CRS">PROJ.4 CRS</a>
</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>n</em></td>
<td align="center">10</td>
<td align="center">The number of virtual fish per cell at initialization</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>virtual_fish_ratio</em></td>
<td align="center">20000</td>
<td align="center">The virtual fish:real fish ratio (e.g. if virtual_fish_ratio=10^6, then 1 virtual fish is 'worth' 10^6 real fish)</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>protect_scen_new</em></td>
<td align="center">LOGICAL</td>
<td align="center">Create new protection scenarios? (TRUE creates new maps, but is slow. FALSE uses previously saved maps). Very computationally expensive if TRUE</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>time_loop_plot</em></td>
<td align="center">LOGICAL</td>
<td align="center">Create plots during the time loops? (TRUE creates plots every year, but might slow down performance a bit).</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>full_model</em></td>
<td align="center">LOGICAL</td>
<td align="center">Allows the user to skip the replicate/scenario/time loops, to proceed directly to analysis of results (assumes there are files in results directory)</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>Linf_mean</em></td>
<td align="center">112.03</td>
<td align="center">Von Bertalanffy growth model parameter - mean asymptotic length (cm)</td>
<td align="center">Knickle and Rose 2013</td>
</tr>
<tr>
<td align="center"><em>Linf_SD</em></td>
<td align="center">5.34</td>
<td align="center">Von Bertalanffy growth model parameter - standard deviation asymptotic length (cm)</td>
<td align="center">Knickle and Rose 2013</td>
</tr>
<tr>
<td align="center"><em>k_mean</em></td>
<td align="center">0.13</td>
<td align="center">Von Bertalanffy growth model parameters - mean growth coefficient (1/year)</td>
<td align="center">Knickle and Rose 2013</td>
</tr>
<tr>
<td align="center"><em>k_SD</em></td>
<td align="center">0.1</td>
<td align="center">Von Bertalanffy growth model parameters - standard deviation growth coefficient (1/year)</td>
<td align="center">Knickle and Rose 2013</td>
</tr>
<tr>
<td align="center"><em>t0</em></td>
<td align="center">0.18</td>
<td align="center">Von Bertalanffy growth model parameters - x intercept (year)</td>
<td align="center">Knickle and Rose 2013</td>
</tr>
<tr>
<td align="center"><em>l_to_w_int</em></td>
<td align="center">1</td>
<td align="center">The time step in years</td>
<td align="center">Knickle and Rose 2013</td>
</tr>
<tr>
<td align="center"><em>l_to_w_power</em></td>
<td align="center">1</td>
<td align="center">The time step in years</td>
<td align="center">Knickle and Rose 2013</td>
</tr>
<tr>
<td align="center"><em>age_mat_steepness</em></td>
<td align="center">2.5</td>
<td align="center">Steepness of the logitic curve for age at sexual maturity. Fish begin maturing at 2 y, 50% at 4 y and all are mature at 6y</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>age_mat_sigmoid</em></td>
<td align="center">4</td>
<td align="center">Sigmoid of the logitic curve for age at sexual maturity. Fish begin maturing at 2 y, 50% at 4 y and all are mature at 6y</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>fecundity</em></td>
<td align="center">0.5*10^6</td>
<td align="center">Size dependent fecundity (eggs per kg of female)</td>
<td align="center">REF</td>
</tr>
<tr>
<td align="center"><em>M</em></td>
<td align="center">rnorm(10000,0.5938,0.0517)</td>
<td align="center">Natural adult mortality,the model selects a random mortality rate from a normal distribution with mean of 0.5938 and a standard deviation of 0.0517. This is designed to match the latest mortality estimates</td>
<td align="center">Swain &amp; Chouinard 2008</td>
</tr>
<tr>
<td align="center"><em>lM</em></td>
<td align="center">rbeta(10000,1000,1.2)</td>
<td align="center">Natural larval mortality, the model selects a random mortality rate from a beta distribution with α=1000 and β=1.2. This is designed to match a mean larval mortality of 99.88% with a range of 98.98-99.99%</td>
<td align="center">Mountain et al. 2008</td>
</tr>
<tr>
<td align="center"><em>CC</em></td>
<td align="center">431</td>
<td align="center">The mean carrying capacity for Canadian cod stocks (kg of fish/km^2)</td>
<td align="center">Myers et al. 2001</td>
</tr>
<tr>
<td align="center"><em>CC_sd</em></td>
<td align="center">387</td>
<td align="center">The standard deviation of carrying capacity for Canadian cod stocks (kg of fish/km^2)</td>
<td align="center">Myers et al. 2001</td>
</tr>
<tr>
<td align="center"><em>e_fold_larvae</em></td>
<td align="center">12.47</td>
<td align="center">The e-folding scale for larvae in km (the distance at which there will be fewer settlers by a factor of e). Estimated as a random walk of 2 cm/s over 90 d planktonic larval duration,the square root is because we assume that the current is like a random walk</td>
<td align="center">Brander and Hurley 1992</td>
</tr>
<tr>
<td align="center"><em>e_fold_adult</em></td>
<td align="center">74.139</td>
<td align="center">The e-folding scale for larvae in km (the distance at which there will be fewer settlers by a factor of e). Estimated from dispersal data</td>
<td align="center">Lawson &amp; Rose 2000</td>
</tr>
<tr>
<td align="center"><em>min_size_migration</em></td>
<td align="center">cm</td>
<td align="center">Minimium size for adult migration (cm)</td>
<td align="center">Lawson &amp; Rose 2000</td>
</tr>
<tr>
<td align="center"><em>fish_communities</em></td>
<td align="center">SpatialPolygonsDataFrame</td>
<td align="center">The spatial distribution of fish_licenses for shore distance calculation in effort calculation. It can be spatial points or spatial polygons data frame (sp package)</td>
<td align="center">raster package</td>
</tr>
<tr>
<td align="center"><em>fish_communities2</em></td>
<td align="center">SpatialPolygonsDataFrame</td>
<td align="center">Same as above, but polygons are simplified to speed up calculation</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>fish_licenses</em></td>
<td align="center">c(866, 4714, 3002, 879, 963)</td>
<td align="center">Number of licenses per region in fish_communities</td>
<td align="center"><a href="http://www.dfo-mpo.gc.ca/stats/commercial/licences-permis/licences-permis-atl-eng.htm">DFO</a></td>
</tr>
<tr>
<td align="center"><em>FMSY</em></td>
<td align="center">0.28</td>
<td align="center">Fisheries mortality at Maximum Sustainable Yield</td>
<td align="center">Mountain et al. 2008</td>
</tr>
<tr>
<td align="center"><em>FMSY_buffer</em></td>
<td align="center">2/3</td>
<td align="center">quota set to fraction of FMSY as per precautionary principle</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>sampling_pop</em></td>
<td align="center">0.001</td>
<td align="center">percent of population measured for biomass estimation</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>biomass_est_n_years</em></td>
<td align="center">5</td>
<td align="center">number if years averaged for biomass estimation</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>min_size</em></td>
<td align="center">38</td>
<td align="center">Minimum size fish caught by nets (cm)</td>
<td align="center">Feekings et al. 2013</td>
</tr>
<tr>
<td align="center"><em>MPA_coverage</em></td>
<td align="center">0.1</td>
<td align="center">Target protection level in proportion (e.g. 0.2 is 20% protection)</td>
<td align="center"><a href="http://www.dfo-mpo.gc.ca/oceans/publications/dmpaf-eczpm/framework-cadre2011-eng.asp">DFO</a></td>
</tr>
<tr>
<td align="center"><em>CtoM</em></td>
<td align="center">0.0009</td>
<td align="center">Coastal:marine ratio for MPAs (e.g. CtoM &lt;- 0.4 is 60% marine and 40% coastal in terms of area)</td>
<td align="center">IUCN and UNEP-WCMC, 2015</td>
</tr>
<tr>
<td align="center"><em>fixdist</em></td>
<td align="center">75</td>
<td align="center">The fixed distance for setting MPA distance in km in fixed distance scenario. Set to approximately the mean adult dispersal distance</td>
<td align="center">Lawson &amp; Rose 2000</td>
</tr>
<tr>
<td align="center"><em>protect_scen</em></td>
<td align="center">1</td>
<td align="center">The time step in years</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>protect_scen_colour</em></td>
<td align="center">1</td>
<td align="center">The time step in years</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>country_name</em></td>
<td align="center">1</td>
<td align="center">The time step in years</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>MPAs_coast</em></td>
<td align="center">SpatialPolygonsDataFrame</td>
<td align="center">COASTAL Marine Protected Areas in Atlantic Canada</td>
<td align="center">IUCN and UNEP-WCMC, 2015</td>
</tr>
<tr>
<td align="center"><em>MPAs_mar</em></td>
<td align="center">SpatialPolygonsDataFrame</td>
<td align="center">MARINE Marine Protected Areas in Atlantic Canada</td>
<td align="center">IUCN and UNEP-WCMC, 2015</td>
</tr>
<tr>
<td align="center"><em>MPAs_AOI</em></td>
<td align="center">SpatialPolygonsDataFrame</td>
<td align="center">Areas of Interest identified by DFO as potential areas for future MPAs. Not used in the latest version of the toolkit</td>
<td align="center"><a href="http://www.dfo-mpo.gc.ca/oceans/marineareas-zonesmarines/mpa-zpm/index-eng.htm">DFO</a></td>
</tr>
<tr>
<td align="center"><em>EEZ</em></td>
<td align="center">SpatialPolygonsDataFrame</td>
<td align="center">Canadian Exclusive Economic Zone [Atlantic part]. The toolkit removes the "Canadian part of the Davis Strait" because it is not important for cod</td>
<td align="center"><a href="http://www.marineregions.org/gazetteer.php?p=details&amp;id=8777">Maritime Boundaries Geodatabase</a></td>
</tr>
<tr>
<td align="center"><em>Habitats</em></td>
<td align="center">SpatialPolygonsDataFrame</td>
<td align="center">Spatial boundaries of the suitable cod habitat. Shapefile generated by georeferencing figure 2</td>
<td align="center">Lough 2004</td>
</tr>
<tr>
<td align="center"><em>Breeding</em></td>
<td align="center">SpatialPolygonsDataFrame</td>
<td align="center">Spatial boundaries of the cod breeding habitat. Shapefile generated by georeferencing figure 2</td>
<td align="center">Lough 2004</td>
</tr>
<tr>
<td align="center"><em>minimum_fishable_biomass</em></td>
<td align="center">1000</td>
<td align="center">Prevent computational errors from occurring when fisherman are trying to fish with insufficient fish. Biomass below this threshold will impose a moratorium on the fishery until the fishery recovers</td>
<td align="center">user defined</td>
</tr>
<tr>
<td align="center"><em>fish_operating_cost_ratio</em></td>
<td align="center">0.53</td>
<td align="center">The ratio of operating cost that are variable with distance (labour and fuel) to the total operating costs for the Mixed Fishery</td>
<td align="center"><a href="http://publications.gc.ca/site/eng/429700/publication.html">DFO 2007</a></td>
</tr>
<tr>
<td align="center"><em>Status_quo_profitability</em></td>
<td align="center">1.58</td>
<td align="center">The ratio of the landed value of the catch to the total operating costs for the Mixed Fishery</td>
<td align="center"><a href="http://publications.gc.ca/site/eng/429700/publication.html">DFO 2007</a></td>
</tr>
<tr>
<td align="center"><em>fish_landed_value</em></td>
<td align="center">1240</td>
<td align="center">The landed value of cod USD per t</td>
<td align="center"><a href="http://www.dfo-mpo.gc.ca/stats/commercial/sea-maritimes-eng.htm">DFO</a></td>
</tr>
<tr>
<td align="center"><em>MPA_maintenance_cost</em></td>
<td align="center">2698</td>
<td align="center">The median maintenance cost for MPAs (USD/km^2/year)</td>
<td align="center">Balmford 2004</td>
</tr>
<tr>
<td align="center"><em>SDR</em></td>
<td align="center">c(0.015,0.03,0.06)</td>
<td align="center">Values for the social discount rate</td>
<td align="center">Keller et al. 2008</td>
</tr>
</tbody>
</table>

<h2>
<a id="equations" class="anchor" href="#equations" aria-hidden="true"><span class="octicon octicon-link"></span></a>Equations</h2>

<h4>
<a id="von-bertalanffy-growth-model" class="anchor" href="#von-bertalanffy-growth-model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Von Bertalanffy growth model</h4>

<pre><code>Lt  &lt;-  Linf * (1-exp((-k)*(t-t0)))
</code></pre>

<p>where <code>Lt</code> is length (cm) at age <code>t</code> (year), <code>Linf</code> is the asymptotic length (cm), <code>k</code> is the Von Bertalanffy growth coefficient (1/year), and t0 is the x intercept (year). Linf and k are randomly generated from a normal distribution (see table above). </p>

<h4>
<a id="length-weight-relationship" class="anchor" href="#length-weight-relationship" aria-hidden="true"><span class="octicon octicon-link"></span></a>Length-weight relationship</h4>

<pre><code>fish$weight &lt;- l_to_w_int * fish$length^l_to_w_power
</code></pre>

<p>where <code>fish$length</code> is length (cm) and <code>fish$weight</code> is the weight (kg).</p>

<h4>
<a id="beverton-holt-recruitment-model" class="anchor" href="#beverton-holt-recruitment-model" aria-hidden="true"><span class="octicon octicon-link"></span></a>Beverton-Holt recruitment model</h4>

<pre><code>R[i] &lt;- (larvae[i]+fish[i])/fish[i]
new_total[i] &lt;- R*fish[i]/(1+fish[i]/CC[i])
new_recruits[i] &lt;- new_total[i]-fish[i]
</code></pre>

<p>where <code>R</code> is the population growth rate for cell <code>i</code>, <code>larvae[i]</code> is the number of competent larvae delivered to cell <code>i</code>, <code>fish[i]</code> is the number of adult fish living in cell <code>i</code>, <code>new_total[i]</code> is the population size for next year (if no adults were to die), <code>new_total[i]</code> is the number if new recruits to be added to the population next year.</p>

<h4>
<a id="effort" class="anchor" href="#effort" aria-hidden="true"><span class="octicon octicon-link"></span></a>Effort</h4>

<pre><code>effort &lt;- (1-relative_biomass[i])*relative_distance[i]
</code></pre>

<p>where the <code>relative_biomass</code> is the biomass in cell <code>i</code> divided by the maximum biomass in the model domain and <code>relative_distance</code> is the actual distance to shore for cell <code>i</code> divided by the mean distance to shore for all the cells in the model domain.</p>

<blockquote>
<p>There will be a few more equations here, plus a summary of what each module/submodule does <em>in English</em></p>
</blockquote>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Bioeconomic MPA network design - R toolkit maintained by <a href="https://github.com/remi-daigle">remi-daigle</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
